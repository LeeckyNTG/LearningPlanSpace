# OkHttp源码解析

- ### 简介：

  Okhttp是一个高性能的处理网络请求的框架，由Square公司开发。其初始流程为下图所示：

  ![工作流程](https://upload-images.jianshu.io/upload_images/5982616-c9b805378329b087.png)

  Okhttp的子系统层级结构如下图：
  
  **网络配置层**：利用Builder模式配置各种参数，例如：超时时间、拦截器等，这些参数都会由Okhttp分发给各个需要的子系统。
   重定向层：负责重定向。
  
   **Header拼接层：**负责把用户构造的请求转换为发送给服务器的请求，把服务器返回的响应转换为对用户友好的响应。
  
   **HTTP缓存层**：负责读取缓存以及更新缓存。
  
   **连接层**：连接层是一个比较复杂的层级，它实现了网络协议、内部的拦截器、安全性认证，连接与连接池等功能，但这一层还没有发起真正的连接，它只是做了连接器一些参数的处理。
  
   **数据响应层**：负责从服务器读取响应的数据。
  
  ![](https://upload-images.jianshu.io/upload_images/5982616-a44688d678695fd0.png)

- ### 请求与响应流程：